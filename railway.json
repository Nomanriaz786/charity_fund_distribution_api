{
  "services": [
    {
      "name": "charitydb",
      "image": "mcr.microsoft.com/mssql/server:2022-latest",
      "ports": [
        "1433:1433"
      ],
      "healthcheck": {
        "test": "/opt/mssql-tools/bin/sqlcmd -S localhost -U sa -P \"${SA_PASSWORD}\" -Q 'SELECT 1' || exit 1",
        "interval": "10s",
        "timeout": "5s",
        "retries": 5,
        "start_period": "20s"
      },
      "env": {
        "ACCEPT_EULA": "Y",
        "SA_PASSWORD": "NomANRIAZ@90"
      }
    },
    {
      "name": "charity-fundraising-api",
      "build": {
        "dockerfilePath": "./Dockerfile"
      },
      "deploy": {
        "command": "dotnet run"
      },
      "depends_on": {
        "charitydb": {
          "condition": "service_healthy"
        }
      },
      "env": {
        "ASPNETCORE_ENVIRONMENT": "Development",
        "DB_SERVER": "charitydb",
        "DB_NAME": "Charity_Fundraising_DBMS",
        "DB_USER": "sa",
        "DB_PASSWORD": "NomANRIAZ@90",
        "TrustServerCertificate": "true"
      }
    }
  ]
}